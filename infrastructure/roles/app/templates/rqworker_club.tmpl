#!upstart

description "Run the django-rq worker for club site"

start on runlevel [2345]
stop on runlevel [016]

setuid {{ csclub_user }}
setgid {{ csclub_user }}


exec /home/{{ csclub_user }}/site/env/bin/python /home/{{ csclub_user }}/site/repo/manage.py rqworker high default --settings={{ csclub_user }}.settings.production --pythonpath='/home/{{ cscenter_user }}/site/repo/cscsite' >> /home/{{ csclub_user }}/site/logs/redis_queue_workers.log 2>&1

respawn
respawn limit 10 5