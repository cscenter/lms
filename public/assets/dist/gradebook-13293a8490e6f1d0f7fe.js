webpackJsonp([1],{bYQb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("lBkD"),o=(n.n(r),n("et1O")),a=n.n(o),i=$(".marks-sheet-csv-link"),c=($("#marks-sheet-save"),$("#gradebook-container")),s=$("#gradebook"),l=$(".gradebook__controls");function u(e){var t=window.event?e.keyCode:e.which;return!(t>31&&(t<48||t>57))}function m(e){return e.value!==e.getAttribute("initial")}var d={launch:function(){d.restoreStates(),d.finalGradeSelects(),d.submitForm(),d.downloadCSVButton(),d.assignmentGradeInputValidator(),d.assignmentGradeInputIncrementByArrows(),d.scrollButtons()},restoreStates:function(){var e=document.querySelectorAll("#gradebook .__input");Array.prototype.forEach.call(e,d.toggleState);var t=document.querySelectorAll("#gradebook select");Array.prototype.forEach.call(t,d.toggleState)},downloadCSVButton:function(){i.click(function(){if(s.find(".__unsaved").length>0)return a()({title:"",text:"Сперва сохраните форму,\nчтобы скачать актуальные данные.",type:"warning",confirmButtonText:"Хорошо"}),!1})},submitForm:function(){$("form[name=gradebook]").submit(function(e){var t=this.querySelectorAll(".__input, .__final_grade select");Array.prototype.forEach.call(t,function(e){if(!m(e)){e.disabled=!0;var t="input[name=initial-"+e.name+"]";document.querySelector(t).disabled=!0}})})},finalGradeSelects:function(){s.on("change","select",function(e){d.toggleState(e.target)})},assignmentGradeInputValidator:function(){s.on("keypress","input.__assignment",u),s.on("change","input.__assignment",function(e){var t=parseInt(this.value,10);if($.isNumeric(this.value)&&Number.isInteger(t)){var n=parseInt($(this).attr("max"));t<0?this.value=0:t>n&&(this.value=n)}else this.value="";d.toggleState(e.target)})},toggleState:function(e){var t=void 0;"input"===e.nodeName.toLowerCase()?t=e:"select"===e.nodeName.toLowerCase()&&(t=e.parentElement),m(e)?t.classList.add("__unsaved"):t.classList.remove("__unsaved")},assignmentGradeInputIncrementByArrows:function(){s.on("keydown","input.__assignment",function(e){if(38===e.keyCode||40===e.keyCode){var t=this;void 0!==t.increment&&void 0!==t.decrement||(t.increment=$.arrowIncrement.prototype.increment,t.decrement=$.arrowIncrement.prototype.decrement),t.opts={parseFn:function(e){var t=e.match(/^(\D*?)(\d*(,\d{3})*(\.\d+)?)\D*$/);return t&&t[2]?t[1]&&t[1].indexOf("-")>=0?-t[2].replace(",",""):+t[2].replace(",",""):0===e.length?0:NaN}},t.$element=$(this),38===e.keyCode?t.increment():40===e.keyCode&&t.decrement()}})},scrollButtons:function(){c.width()<=s.width()&&(l.on("click",".scroll.left",function(){d.scroll(-1)}),l.on("click",".scroll.right",function(){d.scroll(1)}),l.css("visibility","visible"))},scroll:function(e){var t=100*parseInt(e);if(0!==t){var n=c.scrollLeft();c.scrollLeft(n+t)}}};t.default=d},lBkD:function(e,t){var n;(n=jQuery).arrowIncrement=function(e,t){var r=this;this.opts=n.extend({},t),this.$element=n(e).keydown(function(e){38===e.keyCode?r.increment():40===e.keyCode&&r.decrement()})},n.arrowIncrement.prototype.increment=function(e){var t,r,o=this.$element.val();t=this.opts.parseFn?this.opts.parseFn(o):n.arrowIncrement.parse(o),isNaN(t)||(r=n.arrowIncrement.compute(t,e,this.opts),this.opts.formatFn&&(r=this.opts.formatFn(r)),this.$element.val(r).change())},n.arrowIncrement.prototype.decrement=function(){this.increment(!0)},n.arrowIncrement.compute=function(e,t,r){var o,a,i=1,c=r&&"number"==typeof r.min,s=r&&"number"==typeof r.max;if(r&&"number"==typeof r.delta&&(i=r.delta),t){if(c&&e<r.min)return e;o=e-i}else{if(s&&e>r.max)return e;o=e+i}return a=Math.max(n.arrowIncrement.decimals(e),n.arrowIncrement.decimals(i)),o=+o.toFixed(a),c&&o<r.min&&(o=r.min),s&&o>r.max&&(o=r.max),o},n.arrowIncrement.decimals=function(e){var t=""+e;return t.indexOf(".")>=0?t.length-1-t.indexOf("."):0},n.arrowIncrement.parse=function(e){var t=e.match(/^(\D*?)(\d*(,\d{3})*(\.\d+)?)\D*$/);return t&&t[2]?t[1]&&t[1].indexOf("-")>=0?-t[2].replace(",",""):+t[2].replace(",",""):NaN},n.fn.arrowIncrement=function(e){return this.each(function(){new n.arrowIncrement(this,e)})}}});