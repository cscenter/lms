(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"4XEl":function(e,t,n){"use strict";n.r(t);var a=n("ERkP"),r=n.n(a),i=n("1aPi"),o=n("GtyH"),s=n.n(o),c=n("nw5v"),l=n("Tloq"),u=n("aGAf");function p(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(t){var n,a=this;return f(h(h(n=e.call(this,t)||this)),"handleYearChange",function(e){p(this,a),n.setState({year:e})}.bind(this)),f(h(h(n)),"handleAreaChange",function(e){p(this,a),n.setState({area:e})}.bind(this)),f(h(h(n)),"handleCityChange",function(e){p(this,a),n.setState({city:e})}.bind(this)),f(h(h(n)),"fetch",function(e){var t=this;p(this,a),console.debug("Alumni: fetch",n.props,e),n.serverRequest=s.a.ajax({type:"GET",url:n.props.entry_url,dataType:"json",data:e}).done(function(e){p(this,t),n.setState({loading:!1,items:e.data})}.bind(this)).fail(function(){p(this,t),Object(u.f)("Ошибка загрузки данных. Попробуйте перезагрузить страницу.")}.bind(this))}.bind(this)),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){f(e,t,n[t])})}return e}({loading:!0,items:[]},t.initialState),n.fetch=Object(i.a)(n.fetch,300),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.getFilterState(this.state);console.debug("Alumni: filterState",e);var t=this.getRequestPayload(e);console.debug("Alumni: newPayload",t),this.fetch(t)},n.componentWillUnmount=function(){this.serverRequest.abort()},n.componentDidUpdate=function(e,t){if(this.state.loading){var n=this.getFilterState(this.state),a=this.getRequestPayload(n);this.fetch(a)}else Object(u.c)()},n.getFilterState=function(e){return{year:e.year,city:e.city}},n.getRequestPayload=function(e){var t=this;return Object.keys(e).map(function(n){p(this,t),"year"===n&&(e[n]=e[n].value),e[n]=e[n]?e[n]:""}.bind(this)),e},n.render=function(){this.state.loading&&Object(u.d)();var e=this.state,t=e.year,n=e.city,i=e.area,o=this.props,s=o.years,p=o.cities,h=o.areas,f=this.state.items.filter(function(e){var a=null===n||e.city===n.value,r=null===i||e.areas.includes(i.value),o=null===t||e.year===t.value;return a&&r&&o});return r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,"Выпускники"),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-lg-2"},r.a.createElement(c.a,{onChange:this.handleYearChange,value:t,name:"year",isClearable:!1,placeholder:"Год выпуска",options:s,key:"year"})),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement(c.a,{onChange:this.handleAreaChange,value:i,name:"area",placeholder:"Направление",isClearable:!0,options:h,key:"area"})),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement(c.a,{onChange:this.handleCityChange,value:n,name:"city",isClearable:!0,placeholder:"Город",options:p,key:"city"}))),f.length>0?r.a.createElement(l.a,{users:f}):"Таких выпускников у нас нет. Выберите другие параметры фильтрации.")},t}(r.a.Component);t.default=d},Tloq:function(e,t,n){"use strict";var a=n("ERkP"),r=n.n(a);var i=function(e){function t(){return e.apply(this,arguments)||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.photo,a=e.name,i=e.sex,o=e.workplace;return r.a.createElement("a",{className:this.props.className,href:"/users/"+t+"/",id:"user-card-"+t},r.a.createElement("div",{className:"user-card__photo _"+i},null!==n?r.a.createElement("img",{src:n,alt:a}):""),r.a.createElement("div",{className:"user-card__details"},a,null!==o?r.a.createElement("div",{className:"workplace"},o):""))},t}(r.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i,"defaultProps",{className:"user-card"});var o=i;function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var c=function(e){function t(){return e.apply(this,arguments)||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",{className:this.props.className},this.props.users.map(function(t){return function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,e),r.a.createElement(o,s({key:"user-"+t.id},t))}.bind(this)))},t}(r.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c,"defaultProps",{className:"user-cards"});t.a=c},nw5v:function(e,t,n){"use strict";var a=n("RR8A"),r=n("ERkP"),i=n.n(r);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=function(e){function t(){for(var t,n=this,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c(c(t=e.call.apply(e,[this].concat(r))||this)),"handleChange",function(e){s(this,n),t.props.onChange(e)}.bind(this)),t}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(a.a,o({name:this.props.name,value:this.props.value,clearable:!1,className:"react-select-container",classNamePrefix:"react-select",getStyles:function(){s(this,e)}.bind(this)},this.props,{onChange:this.handleChange,isSearchable:!1}))},t}(i.a.Component);t.a=l}}]);