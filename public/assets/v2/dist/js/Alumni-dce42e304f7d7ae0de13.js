(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"4XEl":function(e,t,n){"use strict";n.r(t);var a=n("ERkP"),r=n.n(a),i=n("1aPi"),o=n("GtyH"),s=n.n(o),c=n("nw5v"),l=n("Tloq"),u=n("aGAf");function p(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){var t,n;function o(t){var n,a=this;return f(h(n=e.call(this,t)||this),"handleYearChange",function(e){p(this,a),n.setState({year:e})}.bind(this)),f(h(n),"handleAreaChange",function(e){p(this,a),n.setState({area:e})}.bind(this)),f(h(n),"handleCityChange",function(e){p(this,a),n.setState({city:e})}.bind(this)),f(h(n),"fetch",function(e){var t=this;p(this,a),console.debug("Alumni: fetch",n.props,e),n.serverRequest=s.a.ajax({type:"GET",url:n.props.entry_url,dataType:"json",data:e}).done(function(e){p(this,t),n.setState({loading:!1,items:e.data})}.bind(this)).fail(function(){p(this,t),Object(u.f)("Ошибка загрузки данных. Попробуйте перезагрузить страницу.")}.bind(this))}.bind(this)),n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){f(e,t,n[t])})}return e}({loading:!0,items:[]},t.initialState),n.fetch=Object(i.a)(n.fetch,300),n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var d=o.prototype;return d.componentDidMount=function(){var e=this.getFilterState(this.state);console.debug("Alumni: filterState",e);var t=this.getRequestPayload(e);console.debug("Alumni: newPayload",t),this.fetch(t)},d.componentWillUnmount=function(){this.serverRequest.abort()},d.componentDidUpdate=function(e,t){if(this.state.loading){var n=this.getFilterState(this.state),a=this.getRequestPayload(n);this.fetch(a)}else Object(u.c)()},d.getFilterState=function(e){return{year:e.year,city:e.city}},d.getRequestPayload=function(e){var t=this;return Object.keys(e).map(function(n){p(this,t),"year"===n&&(e[n]=e[n].value),e[n]=e[n]?e[n]:""}.bind(this)),e},d.render=function(){this.state.loading&&Object(u.d)();var e=this.state,t=e.year,n=e.city,i=e.area,o=this.props,s=o.years,p=o.cities,h=o.areas,f=this.state.items.filter(function(e){var a=null===n||e.city===n.value,r=null===i||e.areas.includes(i.value),o=null===t||e.year===t.value;return a&&r&&o});return r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,"Выпускники"),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-lg-2"},r.a.createElement(c.a,{onChange:this.handleYearChange,value:t,name:"year",isClearable:!1,placeholder:"Год выпуска",options:s,key:"year"})),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement(c.a,{onChange:this.handleAreaChange,value:i,name:"area",placeholder:"Направление",isClearable:!0,options:h,key:"area"})),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement(c.a,{onChange:this.handleCityChange,value:n,name:"city",isClearable:!0,placeholder:"Город",options:p,key:"city"}))),f.length>0?r.a.createElement(l.a,{users:f}):"Таких выпускников у нас нет. Выберите другие параметры фильтрации.")},o}(r.a.Component);t.default=d},Tloq:function(e,t,n){"use strict";var a=n("ERkP"),r=n.n(a);var i,o,s,c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){var e=this.props,t=e.id,n=e.photo,a=e.name,i=e.sex,o=e.workplace;return r.a.createElement("a",{className:this.props.className,href:"/users/"+t+"/",id:"user-card-"+t},r.a.createElement("div",{className:"user-card__photo _"+i},null!==n?r.a.createElement("img",{src:n,alt:a}):""),r.a.createElement("div",{className:"user-card__details"},a,null!==o?r.a.createElement("div",{className:"workplace"},o):""))},a}(r.a.Component);s={className:"user-card"},(o="defaultProps")in(i=c)?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s;var l=c;function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var p=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){var e=this;return r.a.createElement("div",{className:this.props.className},this.props.users.map(function(t){return function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,e),r.a.createElement(l,u({key:"user-"+t.id},t))}.bind(this)))},a}(r.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(p,"defaultProps",{className:"user-cards"});t.a=p},nw5v:function(e,t,n){"use strict";var a=n("RR8A"),r=n("ERkP"),i=n.n(r);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var c=function(e){var t,n;function r(){for(var t,n,a,r,i=this,o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return t=e.call.apply(e,[this].concat(c))||this,n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),a="handleChange",r=function(e){s(this,i),t.props.onChange(e)}.bind(this),a in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this;return i.a.createElement(a.a,o({name:this.props.name,value:this.props.value,clearable:!1,className:"react-select-container",classNamePrefix:"react-select",getStyles:function(){s(this,e)}.bind(this)},this.props,{onChange:this.handleChange,isSearchable:!1}))},r}(i.a.Component);t.a=c}}]);