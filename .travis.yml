sudo: false
language: python
dist: xenial
python:
  - "3.7"
addons:
  postgresql: '11'
install:
  - pip3 install pipenv
  - pipenv sync --dev
before_script:
  - cp compscicenter_ru/settings/.env.example compscicenter_ru/settings/.env
  - psql -c 'create database travis_ci_test;' -U postgres
  - python manage.py migrate --noinput --settings=compscicenter_ru.settings.test
script:
  - pytest --create-db --cov=./apps/ --cov=./compscicenter_ru/apps/
