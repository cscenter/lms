{% extends "base.html" %}
{% load i18n %}
{% load thumbnail %}
{% load crispy_forms_tags %}
{% load static %}
{% load markdown from core_tags %}
{% load lookup from core_tags %}
{% load render_bundle from webpack_loader %}
{% load bootstrap_pagination %}

{% block title %}Отправка приглашений{% endblock title %}

{% block body_attrs %} class="gray" data-init-sections="send_interview_invitations"{% endblock body_attrs %}

{% block javascripts %}
    <script src="{% static 'v1/js/vendor/reverse.js' %}"></script>
    {% render_bundle 'admission' 'js' 'V1' %}
{% endblock javascripts %}

{% block content %}
<div class="admission-list-page">
    {% crispy filter.form %}

{#    <button name="click_me">Нажми для теста</button>#}
{#    <div id="test_jquery"></div>#}

    <div class="page-content">
      <div class="panel">
        <div class="panel-heading">
          <h3 class="panel-title">Ожидают приглашения / {{ applicants.count }}</h3>
        </div>

        <div class="panel-body form-check">
          {% crispy interview_stream_form %}
          <table class="table">
            <thead>
              <tr>
                <th><input class="form-check-input" type="checkbox" value="" id="checkAllStudent"></th>
                <th>Поступающий</th>
                <th>Заметка</th>
                <th>Направление</th>
                <th style="width: 60px;">Тест</th>
                <th style="width: 60px;">Экз.</th>
              </tr>
            </thead>
            <tbody>
                {% for applicant in applicants %}
                    <tr id="checkStudent">
                        <td><input class="form-check-input" type="checkbox" value="" id=""></td>
                        <td class="applicant">
                            <a href="{%  url "admission:applicants:detail" applicant.pk %}">{{ applicant.full_name }}</a>
                            {% if applicant.university_other %}{{ applicant.university_other }}{% else %}{% if applicant.university.abbr %}{{ applicant.university.abbr }}{% else %}{{ applicant.university.name }}{% endif %}{% endif %}
                            {% if applicant.course %}<br>{{ applicant.get_course_display }}{% endif %}

                        </td>
                        <td>{% if applicant.admin_note %}{{ applicant.admin_note }}{% else %}-{% endif %}</td>
                        <td>{% if applicant.preferred_study_programs %}
                            {% for p in applicant.preferred_study_programs %}{{ p|upper }}{% if not forloop.last %}, {% endif %}{% endfor %}
                            {% else %}-{% endif %}
                        </td>
                        <td>{% if applicant.online_test %}{{ applicant.online_test.score_display }}{% else %}-{% endif %}</td>
                        <td>{% if applicant.exam %}{{ applicant.exam.score_display }}{% else %}-{% endif %}</td>
                    </tr>
                {% empty %}
                    <tr>
                    <td colspan="6" class="empty-results">Измените параметры поиска.</td>
                    </tr>
                {% endfor %}
            </tbody>
          </table>

        {% if is_paginated %}
            {% bootstrap_paginate page_obj range=10 show_prev_next="false" show_first_last="true" last_label="<i class='fa fa-angle-double-right'></i>" first_label="<i class='fa fa-angle-double-left'></i>" %}
        {% endif %}
        </div>
      </div>
    </div>
</div>
{% endblock content %}
