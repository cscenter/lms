# System Patterns *Optional*

This file documents recurring patterns and standards used in the project.
It is optional, but recommended to be updated as the project evolves.
2025-03-31 16:16:10 - Log of updates made.

*

## Coding Patterns

* **Все комментарии в коде должны быть написаны исключительно на английском языке.**

* **Модульная архитектура**
  - Использование Django приложений для разделения функциональности
  - Четкое разделение ответственности между приложениями
  - Повторное использование компонентов между разными сайтами

* **Слоистая архитектура**
  - Models: определение структуры данных и бизнес-логики
  - Views: обработка HTTP-запросов и формирование ответов
  - Services: инкапсуляция бизнес-логики и операций
  - Selectors: извлечение данных из базы данных
  - Forms: валидация входных данных
  - Serializers: преобразование данных для API

* **Контроль доступа**
  - Использование permissions для детального контроля доступа
  - Ролевая модель для разграничения прав пользователей
  - Middleware для проверки аутентификации и авторизации

* **Обработка событий**
  - Использование Django signals для слабосвязанной коммуникации между компонентами
  - Асинхронная обработка событий через Celery

* **Шаблонизация**
  - Использование Jinja2 для шаблонов
  - Разделение логики и представления

## Architectural Patterns

* **Многосайтовая архитектура**
  - Общий код в директории lms/
  - Специфичный код для каждого сайта в отдельных директориях
  - Использование Django Sites Framework для разделения контента

* **Интеграция с внешними сервисами**
  - Yandex.Contest: проверка заданий по программированию
  - Gerrit: система код-ревью
  - Yandex.Disk: хранение файлов
  - Yandex.Passport: аутентификация пользователей
  - LDAP: интеграция с корпоративными системами

* **Кэширование и очереди**
  - Redis для кэширования данных и управления очередями
  - Celery для асинхронной обработки задач
  - Планировщик задач для периодических операций

* **API-ориентированная архитектура**
  - REST API для взаимодействия с фронтендом
  - Документация API через Swagger/OpenAPI
  - Версионирование API

* **Масштабируемость**
  - Контейнеризация с использованием Docker
  - Оркестрация через Kubernetes
  - Горизонтальное масштабирование компонентов

## Testing Patterns

* **Фреймворк тестирования**
  - Использование pytest для модульных и интеграционных тестов
  - Отдельные директории tests/ в каждом приложении
  - Конфигурация тестов через pytest.ini

* **Организация тестовых данных**
  - Использование фикстур для подготовки тестовых данных
  - Factory Boy для генерации тестовых объектов
  - Моки и стабы для изоляции компонентов

* **Типы тестов**
  - Модульные тесты для отдельных компонентов
  - Интеграционные тесты для проверки взаимодействия компонентов
  - Функциональные тесты для проверки пользовательских сценариев
  - API-тесты для проверки REST API

* **CI/CD**
  - Автоматическое выполнение тестов при коммитах
  - Проверка покрытия кода тестами
  - Линтеры для проверки качества кода