{% extends "base.html" %}

{% load i18n %}

{% load core_tags %}

{% block content %}
    <div class="container">
        <div id="library" class="row">
            <h2>
                {% trans "library"|capfirst %}
                {% if user.is_authenticated and user.is_curator %}
                    <a href="{% admin_url books %}" target="_blank" class="btn btn-link">
                        <i class="glyphicon glyphicon-edit"></i>
                    </a>
                {% endif %}
            </h2>

            <p>
                {% blocktrans %}
                    HOWTO instructions. Do we even need i18n here?
                {% endblocktrans %}
            </p>

            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>{% trans "Book|author"|capfirst %}</th>
                    <th>{% trans "Book|title"|capfirst %}</th>
                    <th>{% trans "Book|read by"|capfirst %}</th>
                    <th>{% trans "Book|number of copies left"|capfirst %}</th>
                </tr>
                </thead>
                <tbody>
                {% for book in books %}
                    <tr{% if book.borrowed_by %} class="warning"{% endif %}>
                        <td><em>{{ book.author }}</em></td>
                        <td>
                            <a href="{{ book.get_absolute_url }}">
                                {{ book.title }}
                            </a>
                        <td>
                            {% if book.read_by.exists %}
                                <p>
                                    {% include "library/_borrowed_by.html" %}
                                </p>
                            {% endif %}
                        </td>
                        <td>{{ book.available_copies }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
