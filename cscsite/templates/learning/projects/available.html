{% extends "base.html" %}
{% load i18n %}
{% load bootstrap_pagination %}
{% load crispy_forms_tags %}

{% block body_class %} gray{% endblock body_class %}

{% block content %}

<div class="projects-list-page">
    <ol class="breadcrumb">
      <li><a href="/projects/">Проекты</a></li>
      <li class="active">текущий семестр (todo: заменить на конкретный семестр)</li>
    </ol>
    <div class="panel">
        <div class="panel-body">
            {% if projects %}
                <h3></h3>

                <table class="table">
                    <thead>
                    <tr>
                        <th class="name">Название</th>
                        <th>Участники</th>
                        <th>Проверяют</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for project in projects %}
                        <tr>
                            <td>
                                <a href="{% url "projects:reviewer_project_detail" project.pk %}">{{ project.name }}</a>
                            </td>
                            <td>
                                {% for student in project.students.all %}
                                    <a href="{{ student.get_absolute_url }}">{{ student.last_name }} {{ student.first_name }}</a><br>
                                {% endfor %}
                            </td>
                            <td>
                                {% for reviewer in project.reviewers.all %}
                                    {{ reviewer }}
                                {% endfor %}
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>

                {% if is_paginated %}
                    {% bootstrap_paginate page_obj range=10 show_prev_next="false" show_first_last="true" last_label="<i class='fa fa-angle-double-right'></i>" first_label="<i class='fa fa-angle-double-left'></i>" %}
                {% endif %}
            {% else %}
                <div class="projects-empty-list">Увы, в текущем семестре нет проектов.</div>
            {% endif %}
        </div>
    </div>

  </div>
{% endblock content %}
