{% extends "base.html" %}
{% load staticfiles %}
{% load i18n %}
{% load thumbnail %}
{% load core_tags %}

{% block stylesheets %}
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/github.min.css">
    <link href="{% static "css/diplomas.css" %}" rel="stylesheet">
{% endblock stylesheets %}

{% block content %}
    <div class="container">
    <pre id="diplomas-code"><span class="btn-clipboard">Copy</span><code class="tex">{% comment %} Pretty ugly due to brackets rendering in django template... {% endcomment %}
{% for s in students %}\diploma{{ '{' }}{{s.first_name}}{{ '}' }}{{ '{' }}{{s.patronymic}}{{ '}' }}{{ '{' }}{{s.last_name}}{{ '}' }}{{ '{' }}{% if s.gender == 'F' %}a{% endif %}{{ '}' }}
{{ '{' }}направлению Computer Science{{ '}' }}
{{ '{' }}сентября {{s.enrollment_year}} года{{ '}' }}
{{ '{' }}{% for enrollment in s.enrollments %}
{% spaceless %}\course{{ '{' }}{{enrollment.course_offering.course.name}}{{ '}' }}{{ '{' }}1 семестр{{ '}' }}{{ '{' }}{% if enrollment.course_offering.courseclass_set.count > 0 %}{% widthratio enrollment.course_offering.courseclass_set.count 1 2 %}{% endif %}{{ '}' }}{{ '{' }}{{enrollment.grade_display|lower}}{{ '}' }}
       {% for teacher in enrollment.course_offering.teachers.all|slice:":2" %}{{ '{' }}{{teacher.get_full_name}}{{ '}' }}{% endfor %}{% if enrollment.course_offering.teachers.all|length == 1 %}{{ '{' }}{{ '}' }}{% endif %}
{% endspaceless %}{% if forloop.last %}
{% endif %}{% endfor %}{{ '}' }}{{ '{' }}
{% for project in s.projects %}{% spaceless %}
\{% if project.project_type == 'research' %}theory{% else %}practice{% endif %}{{ '{' }}{{project.supervisor}}{{ '}' }}
{{ '{' }}{{project.name}}{{ '}' }}{% endspaceless %}{% if forloop.last %}
{% endif %}{% endfor %}{{ '}' }}
{% empty %}
    Нет студентов со статусом "Будет выпускаться"
{% endfor %}
</code></pre>
    </div>
{% endblock content %}

{% block javascripts %}
    <script type="text/javascript" src="http://yastatic.net/highlightjs/8.2/languages/tex.min.js"></script>
    <script type="text/javascript" src="{% static "js/zero_clipboard/ZeroClipboard.min.js" %}"></script>
    <script type="text/javascript" src="{% static "js/diplomas.js" %}"></script>
{% endblock javascripts %}