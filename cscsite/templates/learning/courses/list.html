{% extends "base.html" %}

{% load i18n %}

{% block content %}
<div class="container">
  {% if semester_list %}
  <div class="row">
    <div class="col-xs-12">
    <h1>{% trans "Courses" %}</h1>
    {% for autumn_spring in semester_list %}
      {% if forloop.first %}
        <h3>{% trans "Ongoing" %}</h3>
      {% elif forloop.counter == 2 %}
        <h3>{% trans "Archive" %}</h3>
      {% endif %}

      <table class="table table-stripped">
        <tr>
        {% for semester in autumn_spring %}
          <th width="50%">{% if semester %}{{ semester|title }}{% endif %}</th>
        {% endfor %}
        </tr>
        <tr>
        {% for semester in autumn_spring %}
          <td class="semester-course-list">
            <ul>
            {% for course_offering in semester.courseofferings %}
              <li>
                {% comment %}
                Note(lebedev): because crappy Django doesn't have proper
                whitespace stripping, like {%- in Jinja.
                {% endcomment %}
                <a href="{{ course_offering.get_absolute_url }}">{{ course_offering.course.name }}</a>
                ({% for teacher in course_offering.teachers.all %}<a href="{{ teacher.teacher_profile_url }}" style="white-space:nowrap;">{{ teacher.get_abbreviated_name }}</a>{% if not forloop.last %}, {% endif %}{% endfor %})
                {% if request.site.domain == "compscicenter.ru" and course_offering.is_open %} <span class="label label-outline label-primary label-sm">Курс CS клуба</span>{% endif %}
              </li>
            {% endfor %}
            </ul>
          </td>
        {% endfor %}
        </tr>
      </table>
    {% endfor %}
    </div>
  </div>
  {% else %}
  <div class="row">
    <div class="col-xs-3"></div>
    <div class="col-xs-6 center-aligned">
      <h4>{% trans "No courses yet" %}</h4>
    </div>
    <div class="col-xs-3">
    </div>
  </div>
  {% endif %}
</div>
{% endblock content %}
