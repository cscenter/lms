webpackJsonp([0],{"4N7q":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("in4f"),o=(n.n(r),n("SLSV")),a=n.n(o),i=$(".marks-sheet-csv-link"),c=$("#gradebook-container"),s=$("#gradebook"),l=$(".gradebook__controls"),u={launch:function(){u.finalGradeSelects(),u.restoreStates(),u.downloadCSVButton(),u.assignmentGradeInputValidator(),u.assignmentGradeInputIncrementByArrows(),u.scrollButtons()},restoreStates:function(){var e=document.querySelectorAll("#gradebook .__input");Array.prototype.forEach.call(e,u.toggleState);var t=document.querySelectorAll("#gradebook select");Array.prototype.forEach.call(t,u.toggleState)},downloadCSVButton:function(){i.click(function(){if(s.find(".__unsaved").length>0)return a()({title:"",text:"Сперва сохраните форму,\nчтобы скачать актуальные данные.",type:"warning",confirmButtonText:"Хорошо"}),!1})},finalGradeSelects:function(){s.find("select").each(function(){this.defaultValue=$(this).find("option").filter(function(){return $(this).prop("defaultSelected")}).val()}),s.on("change","select",function(e){u.toggleState(e.target)})},assignmentGradeInputValidator:function(){s.on("keypress","input.__assignment",u.validateNumber),s.on("change","input.__assignment",function(e){var t=parseInt(this.value,10);if($.isNumeric(this.value)&&Number.isInteger(t)){var n=parseInt($(this).attr("max"));t<0?this.value=0:t>n&&(this.value=n)}else this.value="";u.toggleState(e.target)})},validateNumber:function(e){var t=window.event?e.keyCode:e.which;return!(t>31&&(t<48||t>57))},toggleState:function(e){var t=void 0;"input"===e.nodeName.toLowerCase()?t=e:"select"===e.nodeName.toLowerCase()&&(t=e.parentElement);var n=t.classList;e.value!==e.defaultValue?n.add("__unsaved"):n.remove("__unsaved")},assignmentGradeInputIncrementByArrows:function(){s.on("keydown","input.__assignment",function(e){if(38===e.keyCode||40===e.keyCode){var t=this;void 0!==t.increment&&void 0!==t.decrement||(t.increment=$.arrowIncrement.prototype.increment,t.decrement=$.arrowIncrement.prototype.decrement),t.opts={parseFn:function(e){var t=e.match(/^(\D*?)(\d*(,\d{3})*(\.\d+)?)\D*$/);return t&&t[2]?t[1]&&t[1].indexOf("-")>=0?-t[2].replace(",",""):+t[2].replace(",",""):0===e.length?0:NaN}},t.$element=$(this),38===e.keyCode?t.increment():40===e.keyCode&&t.decrement()}})},scrollButtons:function(){c.width()<=s.width()&&(l.on("click",".scroll.left",function(){u.scroll(-1)}),l.on("click",".scroll.right",function(){u.scroll(1)}),l.css("visibility","visible"))},scroll:function(e){var t=100*parseInt(e);if(0!==t){var n=c.scrollLeft();c.scrollLeft(n+t)}}};t.default=u},in4f:function(e,t){!function(e){e.arrowIncrement=function(t,n){var r=this;this.opts=e.extend({},n),this.$element=e(t).keydown(function(e){38===e.keyCode?r.increment():40===e.keyCode&&r.decrement()})},e.arrowIncrement.prototype.increment=function(t){var n,r,o=this.$element.val();n=this.opts.parseFn?this.opts.parseFn(o):e.arrowIncrement.parse(o),isNaN(n)||(r=e.arrowIncrement.compute(n,t,this.opts),this.opts.formatFn&&(r=this.opts.formatFn(r)),this.$element.val(r).change())},e.arrowIncrement.prototype.decrement=function(){this.increment(!0)},e.arrowIncrement.compute=function(t,n,r){var o,a,i=1,c=r&&"number"==typeof r.min,s=r&&"number"==typeof r.max;if(r&&"number"==typeof r.delta&&(i=r.delta),n){if(c&&t<r.min)return t;o=t-i}else{if(s&&t>r.max)return t;o=t+i}return a=Math.max(e.arrowIncrement.decimals(t),e.arrowIncrement.decimals(i)),o=+o.toFixed(a),c&&o<r.min&&(o=r.min),s&&o>r.max&&(o=r.max),o},e.arrowIncrement.decimals=function(e){var t=""+e;return t.indexOf(".")>=0?t.length-1-t.indexOf("."):0},e.arrowIncrement.parse=function(e){var t=e.match(/^(\D*?)(\d*(,\d{3})*(\.\d+)?)\D*$/);return t&&t[2]?t[1]&&t[1].indexOf("-")>=0?-t[2].replace(",",""):+t[2].replace(",",""):NaN},e.fn.arrowIncrement=function(t){return this.each(function(){new e.arrowIncrement(this,t)})}}(jQuery)}});