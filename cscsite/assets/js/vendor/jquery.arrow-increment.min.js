(function(e){e.arrowIncrement=function(t,n){var r=this;this.opts=e.extend({},n),this.$element=e(t).keydown(function(e){e.keyCode===38?r.increment():e.keyCode===40&&r.decrement()})},e.arrowIncrement.prototype.increment=function(t){var n=this.$element.val(),r,i;this.opts.parseFn?r=this.opts.parseFn(n):r=e.arrowIncrement.parse(n);if(isNaN(r))return;i=e.arrowIncrement.compute(r,t,this.opts),this.opts.formatFn&&(i=this.opts.formatFn(i)),this.$element.val(i).change()},e.arrowIncrement.prototype.decrement=function(){this.increment(!0)},e.arrowIncrement.compute=function(t,n,r){var i,s,o=1,u=r&&typeof r.min=="number",a=r&&typeof r.max=="number";r&&typeof r.delta=="number"&&(o=r.delta);if(n){if(u&&t<r.min)return t;i=t-o}else{if(a&&t>r.max)return t;i=t+o}return s=Math.max(e.arrowIncrement.decimals(t),e.arrowIncrement.decimals(o)),i=+i.toFixed(s),u&&i<r.min&&(i=r.min),a&&i>r.max&&(i=r.max),i},e.arrowIncrement.decimals=function(e){var t=""+e,n=t.indexOf(".");return n>=0?t.length-1-t.indexOf("."):0},e.arrowIncrement.parse=function(e){var t=e.match(/^(\D*?)(\d*(,\d{3})*(\.\d+)?)\D*$/);return t&&t[2]?t[1]&&t[1].indexOf("-")>=0?-t[2].replace(",",""):+t[2].replace(",",""):NaN},e.fn.arrowIncrement=function(t){return this.each(function(){new e.arrowIncrement(this,t)})}})(jQuery);